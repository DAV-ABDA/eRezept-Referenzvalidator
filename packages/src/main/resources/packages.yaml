---
### Definition unterstützer FHIR-Packages:
fhirPackages:
  # https://simplifier.net/eRezept/~packages
  kbv.ita.erp:
    packageName: "kbv.ita.erp"
    versions:
      1.0.1:
        version: "1.0.1"
        filename: "kbv.ita.erp-1.0.1.tgz"
        dependencies:
          - packageName: "dav.kbv.sfhir.cs.vs"
            packageVersion: "1.0.2"
          - packageName: "kbv.ita.for"
            packageVersion: "1.0.3"
      #    - packageName: "kbv.basis"
      #      packageVersion: "1.1.3"
      #    - packageName: "de.basisprofil.r4"
      #      packageVersion: "0.9.13"
      1.0.2:
        version: "1.0.2"
        filename: "kbv.ita.erp-1.0.2.tgz"
        dependencies:
          - packageName: "dav.kbv.sfhir.cs.vs"
            packageVersion: "1.0.4"  # TODO ACHTUNG! 1.0.4 erst ab 01.07.2022 davor 1.0.3 ab 01.04.2022 davor 1.0.2
          - packageName: "kbv.ita.for"
            packageVersion: "1.0.3"
      #    - packageName: "kbv.basis"
      #      packageVersion: "1.1.3"
      #    - packageName: "de.basisprofil.r4"
      #      packageVersion: "0.9.13"
  #    1.0.2-1: # Korrekturrelease-BETA
  #      version: "1.0.2-1"
  #      filename: "kbv.ita.erp-1.0.2-1.tgz"
  #      dependencies:
  #        - packageName: "dav.kbv.sfhir.cs.vs"
  #          packageVersion: "1.0.4"
  #    #    - packageName: "kbv.ita.for"
  #    #      packageVersion: "1.0.3"
  #    #    - packageName: "kbv.basis"
  #    #      packageVersion: "1.1.3"
  #        - packageName: "de.basisprofil.r4"
  #          packageVersion: "0.9.13"
      1.1.0:
        version: "1.1.0"
        filename: "kbv.ita.erp-1.1.0.tgz"
        dependencies:
          - packageName: "dav.kbv.sfhir.cs.vs"
            packageVersion: "1.0.5"
          - packageName: "kbv.ita.for"
            packageVersion: "1.1.0"
      #    - packageName: "kbv.basis"
      #      packageVersion: "1.3.0"
      #    - packageName: "de.basisprofil.r4"
      #      packageVersion: "1.3.2"

  # https://simplifier.net/FOR/~packages
  kbv.ita.for:
    packageName: "kbv.ita.for"
    versions:
      1.0.3:
        version: "1.0.3"
        filename: "kbv.ita.for-1.0.3.tgz"
        dependencies:
          - packageName: "kbv.basis"
            packageVersion: "1.1.3"
      #    - packageName: "de.basisprofil.r4"
      #      packageVersion: "0.9.13"
      1.1.0:
        version: "1.1.0"
        filename: "kbv.ita.for-1.1.0.tgz"
        dependencies:
          - packageName: "kbv.basis"
            packageVersion: "1.3.0"
       #   - packageName: "de.basisprofil.r4"
       #     packageVersion: "1.3.2"

  # https://simplifier.net/Base1x0/~packages
  kbv.basis:
    packageName: "kbv.basis"
    versions:
      1.1.3:
        version: "1.1.3"
        filename: "kbv.basis-1.1.3.tgz"
        dependencies:
          - packageName: "de.basisprofil.r4"
            packageVersion: "0.9.13"
      1.3.0:
        version: "1.3.0"
        filename: "kbv.basis-1.3.0.tgz"
        dependencies:
          - packageName: "de.basisprofil.r4"
            packageVersion: "1.3.2"

  # vom DAV erstelltes Package der externen Schlüsseltabellen https://applications.kbv.de/ oder https://update.kbv.de/ita-update/DigitaleMuster/ERP/KBV_FHIR_eRP_V1.0.2_zur_Validierung.zip DIR: _Codesystem_ST
  # KBV anvisiert externes TerminologiePackage
  dav.kbv.sfhir.cs.vs:
    packageName: "dav.kbv.sfhir.cs.vs"
    versions:
      1.0.2: # ersetzt durch 1.0.3 ab 01.04.2022
        version: "1.0.2"
        filename: "dav.kbv.sfhir.cs.vs-1.0.2-json.tgz"
      1.0.3: # ersetzt durch 1.0.4 ab 01.07.2022
        version: "1.0.3"
        filename: "dav.kbv.sfhir.cs.vs-1.0.3-json.tgz"
      1.0.4: # ersetzt durch 1.0.5 ab 01.07.2023
        version: "1.0.4"
        filename: "dav.kbv.sfhir.cs.vs-1.0.4-json.tgz"
      1.0.5: # abwärtskompatible?
        version: "1.0.5"
        filename: "dav.kbv.sfhir.cs.vs-1.0.5-json.tgz"

  # https://simplifier.net/erezept-workflow/~packages
  de.gematik.erezept-workflow.r4:
    packageName: "de.gematik.erezept-workflow.r4"
    versions:
      1.0.3:
        version: "1.0.3"
        filename: "de.gematik.erezept-workflow.r4-1.0.3-1.tgz"
        dependencies:
          - packageName: "dav.kbv.sfhir.cs.vs"
            packageVersion: "1.0.2"
          - packageName: "kbv.ita.erp"
            packageVersion: "1.0.1"
      #    - packageName: "kbv.ita.for"
      #      packageVersion: "1.0.3"
      #    - packageName: "kbv.basis"
      #      packageVersion: "1.1.3"
      #    - packageName: "de.basisprofil.r4"
      #      packageVersion: "0.9.13"
      1.0.3-1:
        version: "1.0.3-1"
        filename: "de.gematik.erezept-workflow.r4-1.0.3-1.tgz"
        dependencies:
          - packageName: "dav.kbv.sfhir.cs.vs"
            packageVersion: "1.0.2"
          - packageName: "kbv.ita.erp"
            packageVersion: "1.0.1"
      #    - packageName: "kbv.ita.for"
      #      packageVersion: "1.0.3"
      #    - packageName: "kbv.basis"
      #      packageVersion: "1.1.3"
      #    - packageName: "de.basisprofil.r4"
      #      packageVersion: "0.9.13"
      1.1.1:
        version: "1.1.1"
        filename: "de.gematik.erezept-workflow.r4-1.1.1.tgz"
        dependencies:
          - packageName: "kbv.ita.erp"
            packageVersion: "1.0.2"
      #    - packageName: "dav.kbv.sfhir.cs.vs"
      #      packageVersion: "1.0.4" # TODO ACHTUNG! 1.0.4 erst ab 01.07.2022 davor 1.0.3 ab 01.04.2022 davor 1.0.2

      #    - packageName: "de.basisprofil.r4"
      #      packageVersion: "0.9.13"
      1.2.0:
        version: "1.2.0"
        filename: "de.gematik.erezept-workflow.r4-1.2.0.tgz"
        dependencies:
          - packageName: "kbv.ita.erp"
            packageVersion: "1.1.0"
      #    - packageName: "dav.kbv.sfhir.cs.vs"
      #      packageVersion: "1.0.5"
      #    - packageName: "kbv.ita.for"
      #      packageVersion: "1.1.0"
      #    - packageName: "kbv.basis"
      #      packageVersion: "1.3.0"
      #    - packageName: "de.basisprofil.r4"
      #      packageVersion: "1.3.2"

  # https://simplifier.net/erezept-patientenrechnung
  de.gematik.erezept-patientenrechnung.r4:
    packageName: "de.gematik.erezept-patientenrechnung.r4"
    versions:
      1.0.0-rc3:
        version: "1.0.0"
        filename: "de.gematik.erezept-patientenrechnung.r4-1.0.0-rc3.tgz"
        dependencies:
          - packageName: "kbv.ita.erp"
            packageVersion: "1.1.0" # TODO: change2 -> eigentlich PreRelease
     #     - packageName: "dav.kbv.sfhir.cs.vs"
     #       packageVersion: "1.0.5"
     #     - packageName: "kbv.basis"
     #       packageVersion: "1.3.0"
     #     - packageName: "kbv.ita.for"
     #       packageVersion: "1.1.0"
     #     - packageName: "de.abda.erezeptabgabedatenbasis"
     #       packageVersion: "1.3.0-rc3"
          - packageName: "de.abda.erezeptabgabedatenpkv"
            packageVersion: "1.1.0-rc12" # TODO: change2 -> eigentlich 1.3.0-rc1
          - packageName: "de.gematik.erezept-workflow.r4"
            packageVersion: "1.2.0" # TODO: change2 -> eigentlich rc3
          - packageName: "de.basisprofil.r4"
            packageVersion: "1.3.2"

  # https://simplifier.net/eRezeptAbrechnungsdaten/~packages
  de.gkvsv.erezeptabrechnungsdaten:
    packageName: "de.gkvsv.erezeptabrechnungsdaten"
    versions:
      1.0.4:
        version: "1.0.4"
        filename: "de.gkvsv.erezeptabrechnungsdaten-1.0.4.tgz"
        dependencies:
          - packageName: "de.abda.erezeptabgabedaten"
            packageVersion: "1.0.3"
          - packageName: "dav.kbv.sfhir.cs.vs"
            packageVersion: "1.0.5"
          - packageName: "de.gematik.erezept-workflow.r4"
            packageVersion: "1.0.3"
          - packageName: "kbv.ita.erp"
            packageVersion: "1.0.1"
      #    - packageName: "kbv.ita.for"
      #      packageVersion: "1.0.3"
      #    - packageName: "kbv.basis"
      #      packageVersion: "1.1.3"
      #    - packageName: "de.basisprofil.r4"
      #      packageVersion: "0.9.13"
      1.0.5:
        version: "1.0.5"
        filename: "de.gkvsv.erezeptabrechnungsdaten-1.0.5.tgz"
        dependencies:
          - packageName: "de.abda.erezeptabgabedaten"
            packageVersion: "1.0.3"
          - packageName: "de.gematik.erezept-workflow.r4"
            packageVersion: "1.0.3-1"
      #    - packageName: "de.basisprofil.r4"
      #      packageVersion: "0.9.13"
      1.0.6:
        version: "1.0.6"
        filename: "de.gkvsv.erezeptabrechnungsdaten-1.0.6.tgz"
        dependencies:
          - packageName: "de.abda.erezeptabgabedaten"
            packageVersion: "1.0.3"
          - packageName: "dav.kbv.sfhir.cs.vs"
            packageVersion: "1.0.5"
          - packageName: "de.gematik.erezept-workflow.r4"
            packageVersion: "1.0.3-1"
          - packageName: "kbv.ita.erp"
            packageVersion: "1.0.1"
      #    - packageName: "kbv.ita.for"
      #      packageVersion: "1.0.3"
      #    - packageName: "kbv.basis"
      #      packageVersion: "1.1.3"
      #    - packageName: "de.basisprofil.r4"
      #      packageVersion: "0.9.13"
      1.1.0:
        version: "1.1.0"
        filename: "de.gkvsv.erezeptabrechnungsdaten-1.1.0.tgz"
        dependencies:
          - packageName: "de.abda.erezeptabgabedatenbasis"
            packageVersion: "1.1.0"
          - packageName: "de.gematik.erezept-workflow.r4"
            packageVersion: "1.1.1"
      #    - packageName: "de.basisprofil.r4"
      #      packageVersion: "0.9.13"
      1.2.0:
        version: "1.2.0"
        filename: "de.gkvsv.erezeptabrechnungsdaten-1.2.0.tgz"
        dependencies:
          - packageName: "de.abda.erezeptabgabedatenbasis"
            packageVersion: "1.2.0"
          - packageName: "de.gematik.erezept-workflow.r4"
            packageVersion: "1.1.1"
      #    - packageName: "de.basisprofil.r4"
      #      packageVersion: "0.9.13"
      1.3.0-rc2: # coming soon
        version: "1.3.0"
        filename: "de.gkvsv.erezeptabrechnungsdaten-1.3.0-rc2.tgz"
        dependencies:
          - packageName: "de.abda.erezeptabgabedatenbasis"
            packageVersion: "1.3.0-rc4" # TODO: change2 -> eigentlich 1.3.0-rc1
      #    - packageName: "de.basisprofil.r4"
      #      packageVersion: "1.3.2"

  # https://simplifier.net/eRezeptAbgabedaten/~packages
  de.abda.erezeptabgabedaten:
    packageName: "de.abda.erezeptabgabedaten"
    versions:
      1.0.3:
        version: "1.0.3"
        filename: "de.abda.erezeptabgabedaten-1.0.3.tgz"
        dependencies:
          - packageName: "de.basisprofil.r4"
            packageVersion: "0.9.13"
      1.1.2: #KorrekturRelease
        version: "1.1.2"
        filename: "de.abda.erezeptabgabedaten-1.1.2.tgz"
        dependencies:
          - packageName: "de.abda.erezeptabgabedatenbasis"
            packageVersion: "1.1.3"
      #    - packageName: "de.basisprofil.r4"
      #      packageVersion: "0.9.13"
      1.2.0:
        version: "1.2.0"
        filename: "de.abda.erezeptabgabedaten-1.2.0.tgz"
        dependencies:
          - packageName: "de.abda.erezeptabgabedatenbasis"
            packageVersion: "1.2.0"
      #    - packageName: "de.basisprofil.r4"
      #      packageVersion: "0.9.13"
      1.3.0-rc4: # coming soon
        version: "1.3.0"
        filename: "de.abda.erezeptabgabedaten-1.3.0-rc4.tgz"
        dependencies:
          - packageName: "de.abda.erezeptabgabedatenbasis"
            packageVersion: "1.3.0-rc4"
      #    - packageName: "de.basisprofil.r4"
      #      packageVersion: "1.3.2"

### TODO: BETA
# https://simplifier.net/packages/erezeptabgabedaten.staging/
#  erezeptabgabedaten.staging: # TEST
#    packageName: "erezeptabgabedaten.staging"
#    versions:
#      1.3.0-beta5: #coming soon
#        version: "1.3.0-beta5"
#        filename: "erezeptabgabedaten.staging-1.3.0-beta5.tgz"
#        dependencies:
#          - packageName: "erezeptabgabedatenbasis.staging"
#            packageVersion: "1.3.0-beta6"
#      #    - packageName: "de.basisprofil.r4"
#      #      packageVersion: "1.3.2"

  # https://simplifier.net/eRezeptAbgabedatenBasis/~packages
  de.abda.erezeptabgabedatenbasis:
    packageName: "de.abda.erezeptabgabedatenbasis"
    versions:
      1.1.0:
        version: "1.1.0"
        filename: "de.abda.erezeptabgabedatenbasis-1.1.0.tgz"
        dependencies:
          - packageName: "de.basisprofil.r4"
            packageVersion: "0.9.13"
      1.1.3: #KorrekturRelease
        version: "1.1.3"
        filename: "de.abda.erezeptabgabedatenbasis-1.1.3.tgz"
        dependencies:
          - packageName: "de.basisprofil.r4"
            packageVersion: "0.9.13"
      1.2.0:
        version: "1.2.0"
        filename: "de.abda.erezeptabgabedatenbasis-1.2.0.tgz"
        dependencies:
          - packageName: "de.basisprofil.r4"
            packageVersion: "0.9.13"
      1.3.0-rc4: # coming soon
        version: "1.3.0"
        filename: "de.abda.erezeptabgabedatenbasis-1.3.0-rc4.tgz"
        dependencies:
          - packageName: "de.basisprofil.r4"
            packageVersion: "1.3.2"

### TODO: BETA
# https://simplifier.net/packages/erezeptabgabedatenbasis.staging/
#  erezeptabgabedatenbasis.staging: # TEST
#    packageName: "erezeptabgabedatenbasis.staging"
#    versions:
#      1.3.0-beta6: #coming soon
#        version: "1.3.0-beta6"
#        filename: "erezeptabgabedatenbasis.staging-1.3.0-beta6.tgz"
#        dependencies:
#          - packageName: "de.basisprofil.r4"
#            packageVersion: "1.3.2"

  # https://simplifier.net/eRezeptAbgabedatenPKV/~packages
  de.abda.erezeptabgabedatenpkv:
    packageName: "de.abda.erezeptabgabedatenpkv"
    versions:
      1.1.0-rc12: #coming soon
        version: "1.1.0"
        filename: "de.abda.erezeptabgabedatenpkv-1.1.0-rc12.tgz"
        dependencies:
          - packageName: "de.abda.erezeptabgabedatenbasis"
            packageVersion: "1.3.0-rc4"
      #    - packageName: "de.basisprofil.r4"
      #      packageVersion: "1.3.2"

### TODO: BETA
 # https://simplifier.net/packages/erezeptabgabedatenpkv.staging/
#  erezeptabgabedatenpkv.staging: # TEST
#    packageName: "erezeptabgabedatenpkv.staging"
#    versions:
#     1.1.0-beta5: #coming soon
#       version: "1.1.0-beta5"
#       filename: "erezeptabgabedatenpkv.staging-1.1.0-beta5.tgz"
#       dependencies:
#         - packageName: "erezeptabgabedatenbasis.staging"
#           packageVersion: "1.3.0-beta5"
#     #    - packageName: "de.basisprofil.r4"
#     #      packageVersion: "1.3.2"

  # https://simplifier.net/Basisprofil-DE-R4/~packages
  de.basisprofil.r4:
    packageName: "de.basisprofil.r4"
    versions:
      0.9.13:
        version: "0.9.13"
        filename: "de.basisprofil.r4-0.9.13.tgz"
      1.3.2:
        version: "1.3.2"
        filename: "de.basisprofil.r4-1.3.2.tgz"


### Definition unterstützer Profile:
supportedProfiles:
  # KBV Profile des eRezept (https://simplifier.net/eRezept/)
  "https://fhir.kbv.de/StructureDefinition/KBV_PR_ERP_Bundle":
    profileName: "https://fhir.kbv.de/StructureDefinition/KBV_PR_ERP_Bundle"
    versions:
      1.0.1:
        version: "1.0.1"
        validityPeriod:
          valid_from: "2021-07-01"
          valid_to: "2022-01-31"  # TODO: Übergangszeit
        # fhir_path: "Bundle.entry.where(resource is MedicationRequest).resource.authoredOn"
        # fhir_path: "Bundle.entry.where(resource is SupplyRequest).resource.authoredOn"
          fhir_path: "Bundle;entry;resource;SupplyRequest|MedicationRequest;authoredOn"
        requiredPackage:
          packageName: "kbv.ita.erp"
          packageVersion: "1.0.1"
      1.0.2:
        version: "1.0.2"
        validityPeriod:
          valid_from: "2021-01-01"
          valid_to: "2023-06-30" # TODO: Übergangszeit!
          # fhir_path: "Bundle.entry.where(resource is MedicationRequest).resource.authoredOn"
          # fhir_path: "Bundle.entry.where(resource is SupplyRequest).resource.authoredOn"
          fhir_path: "Bundle;entry;resource;SupplyRequest|MedicationRequest;authoredOn"
        requiredPackage:
          packageName: "kbv.ita.erp"
          packageVersion: "1.0.2"
        #  packageVersion: "1.0.2-1" # TODO: KBV KorrekturRelease 15.11.22
      1.1.0:
        version: "1.1.0"
        validityPeriod:
          valid_from: "2023-07-01"
          valid_to: "2024-12-31" # TODO: Endpunkt!
          # fhir_path: "Bundle.entry.where(resource is MedicationRequest).resource.authoredOn"
          # fhir_path: "Bundle.entry.where(resource is SupplyRequest).resource.authoredOn"
          fhir_path: "Bundle;entry;resource;SupplyRequest|MedicationRequest;authoredOn"
        requiredPackage:
          packageName: "kbv.ita.erp"
          packageVersion: "1.1.0"

  # TODO: add? Umgang mit Referenzen?
  # https://fhir.kbv.de/StructureDefinition/KBV_PR_ERP_Composition
  # https://fhir.kbv.de/StructureDefinition/KBV_PR_ERP_Medication_Compounding
  # https://fhir.kbv.de/StructureDefinition/KBV_PR_ERP_Medication_FreeText
  # https://fhir.kbv.de/StructureDefinition/KBV_PR_ERP_Medication_Ingredient
  # https://fhir.kbv.de/StructureDefinition/KBV_PR_ERP_Medication_PZN
  # https://fhir.kbv.de/StructureDefinition/KBV_PR_ERP_PracticeSupply
  # https://fhir.kbv.de/StructureDefinition/KBV_PR_ERP_Prescription
  ## Formularübergreifende Vorgaben für Digitale Muster
  ## https://fhir.kbv.de/StructureDefinition/KBV_PR_FOR_Coverage
  ## https://fhir.kbv.de/StructureDefinition/KBV_PR_FOR_Organization
  ## https://fhir.kbv.de/StructureDefinition/KBV_PR_FOR_Patient
  ## https://fhir.kbv.de/StructureDefinition/KBV_PR_FOR_Practitioner
  ## https://fhir.kbv.de/StructureDefinition/KBV_PR_FOR_PractitionerRole

  # gematik Profile des E-Rezept-Workflow (https://simplifier.net/erezept-workflow)
  "https://gematik.de/fhir/StructureDefinition/ErxMedicationDispense":
    profileName: "https://gematik.de/fhir/StructureDefinition/ErxMedicationDispense"
    versions:
      0.0.0:  # wenn keine Version
        version: "0.0.0"
        validityPeriod:
          valid_from: "2021-07-01"
          valid_to: "2021-12-31"
        # fhir_path: "whenHandedOver"
          fhir_path: "MedicationDispense;whenHandedOver"
        requiredPackage:
          packageName: "de.gematik.erezept-workflow.r4"
          packageVersion: "1.0.3-1"
      1.0.3:
        version: "1.0.3"
        validityPeriod:
          valid_from: "2021-07-01"
          valid_to: "2021-12-31"
        # fhir_path: "whenHandedOver"
          fhir_path: "MedicationDispense;whenHandedOver"
        requiredPackage:
          packageName: "de.gematik.erezept-workflow.r4"
          packageVersion: "1.0.3"
      1.0.3-1:
        version: "1.0.3-1"
        validityPeriod:
          valid_from: "2021-07-01"
          valid_to: "2021-12-31"
        # fhir_path: "whenHandedOver"
          fhir_path: "MedicationDispense;whenHandedOver"
        requiredPackage:
          packageName: "de.gematik.erezept-workflow.r4"
          packageVersion: "1.0.3-1"
      1.1.1:
        version: "1.1.1"
        validityPeriod:
          valid_from: "2022-01-01"
          valid_to: "2023-06-30"
        # fhir_path: "whenHandedOver"
          fhir_path: "MedicationDispense;whenHandedOver"
        requiredPackage:
          packageName: "de.gematik.erezept-workflow.r4"
          packageVersion: "1.1.1"

  # MedicationDispense
  "https://gematik.de/fhir/erp/StructureDefinition/GEM_ERP_PR_MedicationDispense":
    profileName: "https://gematik.de/fhir/erp/StructureDefinition/GEM_ERP_PR_MedicationDispense"
    versions:
      1.2: #coming soon
        version: "1.2"
        validityPeriod:
          valid_from: "2023-07-01"
          valid_to: "2024-12-31" # TODO: Endpunkt!
        # fhir_path: "whenHandedOver"
          fhir_path: "MedicationDispense;whenHandedOver"
        requiredPackage:
          packageName: "de.gematik.erezept-workflow.r4"
          packageVersion: "1.2.0"

  "https://gematik.de/fhir/StructureDefinition/ErxReceipt":
    profileName: "https://gematik.de/fhir/StructureDefinition/ErxReceipt"
    versions:
      0.0.0:  # TODO Test wenn keine Version
        version: "0.0.0"
        validityPeriod:
          valid_from: "2021-07-01"
          valid_to: "2021-12-31"
        # fhir_path: "Bundle.entry.where(resource is Composition).resource.date"
          fhir_path: "Bundle;entry;resource;Composition;date"
        requiredPackage:
          packageName: "de.gematik.erezept-workflow.r4"
          packageVersion: "1.0.3-1"
      1.0.3:
        version: "1.0.3"
        validityPeriod:
          valid_from: "2021-07-01"
          valid_to: "2021-12-31"
        # fhir_path: "Bundle.entry.where(resource is Composition).resource.date"
          fhir_path: "Bundle;entry;resource;Composition;date"
        requiredPackage:
          packageName: "de.gematik.erezept-workflow.r4"
          packageVersion: "1.0.3"
      1.0.3-1:
        version: "1.0.3-1"
        validityPeriod:
          valid_from: "2021-07-01"
          valid_to: "2021-12-31"
        # fhir_path: "Bundle.entry.where(resource is Composition).resource.date"
          fhir_path: "Bundle;entry;resource;Composition;date"
        requiredPackage:
          packageName: "de.gematik.erezept-workflow.r4"
          packageVersion: "1.0.3-1"
      1.1.1:
        version: "1.1.1"
        validityPeriod:
          valid_from: "2022-01-01"
          valid_to: "2023-06-30"
        # fhir_path: "Bundle.entry.where(resource is Composition).resource.date"
          fhir_path: "Bundle;entry;resource;Composition;date"
        requiredPackage:
          packageName: "de.gematik.erezept-workflow.r4"
          packageVersion: "1.1.1"

  # Quittung
  "https://gematik.de/fhir/erp/StructureDefinition/GEM_ERP_PR_Bundle":
    profileName: "https://gematik.de/fhir/erp/StructureDefinition/GEM_ERP_PR_Bundle"
    versions:
      1.2: #coming soon
        version: "1.2"
        validityPeriod:
          valid_from: "2023-07-01"
          valid_to: "2024-12-31" # TODO: Endpunkt!
        # fhir_path: "Bundle.entry.where(resource is Composition).resource.date"
          fhir_path: "Bundle;entry;resource;Composition;date"
        requiredPackage:
          packageName: "de.gematik.erezept-workflow.r4"
          packageVersion: "1.2.0"

  # TODO: add? Umgang mit Referenzen?
  # https://gematik.de/fhir/StructureDefinition/ErxComposition
  # https://gematik.de/fhir/StructureDefinition/ErxTask
  # https://gematik.de/fhir/StructureDefinition/ErxChargeItem -> ACHTUNG: PKV Kontext

  # ChargeItem -> PKV Rechnung (gematik)
  "https://gematik.de/fhir/erpchrg/StructureDefinition/GEM_ERPCHRG_PR_ChargeItem":
    profileName: "https://gematik.de/fhir/erpchrg/StructureDefinition/GEM_ERPCHRG_PR_ChargeItem"
    versions:
      1.0: #coming soon
        version: "1.0"
        validityPeriod:
          valid_from: "2023-07-01"
          valid_to: "2024-12-31" # TODO: Endpunkt!
        # fhir_path: "enteredDate"
          fhir_path: "ChargeItem;enteredDate"
        requiredPackage:
          packageName: "de.gematik.erezept-patientenrechnung.r4"
          packageVersion: "1.0.0-rc3"

#  # ChargeItem -> PKV Rechnung (gematik)
#  "https://gematik.de/fhir/erp/StructureDefinition/GEM_ERP_PR_CloseOperationInputBundle":
#    profileName: "https://gematik.de/fhir/erp/StructureDefinition/GEM_ERP_PR_CloseOperationInputBundle"
#    versions:
#      1.0: #coming soon
#        version: "1.0"
#        validityPeriod:
#          valid_from: "2023-07-01"
#          valid_to: "2023-12-31" # TODO: Endpunkt!
#        # fhir_path: "enteredDate"
#          fhir_path: "ChargeItem;enteredDate"
#        requiredPackage:
#          packageName: "de.gematik.erezept-patientenrechnung.r4"
#          packageVersion: "1.0.0-rc3"

  # DAV Profile des eAbgabedatensatzes (https://simplifier.net/erezeptabgabedaten)
  "http://fhir.abda.de/eRezeptAbgabedaten/StructureDefinition/DAV-PR-ERP-AbgabedatenBundle":
    profileName: "http://fhir.abda.de/eRezeptAbgabedaten/StructureDefinition/DAV-PR-ERP-AbgabedatenBundle"
    versions:
      1.0.3:
        version: "1.0.3"
        validityPeriod:
          valid_from: "2021-07-01"
          valid_to: "2022-01-31"
        # fhir_path: "Bundle.entry.where(resource is MedicationDispense).resource.whenHandedOver"
          fhir_path: "Bundle;entry;resource;MedicationDispense;whenHandedOver"
        requiredPackage:
          packageName: "de.abda.erezeptabgabedaten"
          packageVersion: "1.0.3"
      1.1.0:
        version: "1.1.0"
        validityPeriod:
          valid_from: "2022-01-01"
          valid_to: "2022-06-30"
        # fhir_path: "Bundle.entry.where(resource is MedicationDispense).resource.whenHandedOver"
          fhir_path: "Bundle;entry;resource;MedicationDispense;whenHandedOver"
        requiredPackage:
          packageName: "de.abda.erezeptabgabedaten"
          packageVersion: "1.1.2" #KorrekturRelease
      1.2:
        version: "1.2"
        validityPeriod:
          valid_from: "2022-07-01"
          valid_to: "2023-06-30" # TODO: Übergangszeitraum?
        # fhir_path: "Bundle.entry.where(resource is MedicationDispense).resource.whenHandedOver"
          fhir_path: "Bundle;entry;resource;MedicationDispense;whenHandedOver"
        requiredPackage:
          packageName: "de.abda.erezeptabgabedaten"
          packageVersion: "1.2.0"
      1.3: #coming soon
        version: "1.3"
        validityPeriod:
          valid_from: "2023-07-01"
          valid_to: "2024-12-31" # TODO: Endpunkt!
        # fhir_path: "Bundle.entry.where(resource is MedicationDispense).resource.whenHandedOver"
          fhir_path: "Bundle;entry;resource;MedicationDispense;whenHandedOver"
        requiredPackage:
          packageName: "de.abda.erezeptabgabedaten"
          packageVersion: "1.3.0-rc4"
### TODO: BETA
#          packageName: "erezeptabgabedaten.staging"
#          packageVersion: "1.3.0-beta5"

  # TODO: add? Umgang mit Referenzen?
  # http://fhir.abda.de/eRezeptAbgabedaten/StructureDefinition/DAV-PR-ERP-Apotheke
  # http://fhir.abda.de/eRezeptAbgabedaten/StructureDefinition/DAV-PR-ERP-AbgabedatenComposition
  # http://fhir.abda.de/eRezeptAbgabedaten/StructureDefinition/DAV-PR-ERP-Abgabeinformationen
  # http://fhir.abda.de/eRezeptAbgabedaten/StructureDefinition/DAV-PR-ERP-Abrechnungszeilen
  # http://fhir.abda.de/eRezeptAbgabedaten/StructureDefinition/DAV-PR-ERP-ZusatzdatenHerstellung
  # http://fhir.abda.de/eRezeptAbgabedaten/StructureDefinition/DAV-PR-ERP-ZusatzdatenEinheit

  # GKV-SV Profile des eAbrechnungsdatensatzes (https://simplifier.net/erezeptabrechnungsdaten)
  "https://fhir.gkvsv.de/StructureDefinition/GKVSV_PR_TA7_Sammelrechnung_Bundle":
    profileName: "https://fhir.gkvsv.de/StructureDefinition/GKVSV_PR_TA7_Sammelrechnung_Bundle"
    versions:
      1.0.4:
        version: "1.0.4"
        validityPeriod:
          valid_from: "2021-07-01"
          valid_to: "2021-09-30"
        # fhir_path: "Bundle.entry.where(resource is Composition).resource.date"
          fhir_path: "Bundle;entry;resource;Composition;date"
        requiredPackage:
          packageName: "de.gkvsv.erezeptabrechnungsdaten"
          packageVersion: "1.0.4"
      1.0.5:
        version: "1.0.5"
        validityPeriod:
          valid_from: "2021-07-01"
          valid_to: "2021-09-30"
        # fhir_path: "Bundle.entry.where(resource is Composition).resource.date"
          fhir_path: "Bundle;entry;resource;Composition;date"
        requiredPackage:
          packageName: "de.gkvsv.erezeptabrechnungsdaten"
          packageVersion: "1.0.5"
      1.0.6:
        version: "1.0.6"
        validityPeriod:
          valid_from: "2021-07-01"
          valid_to: "2021-12-31"
        # fhir_path: "Bundle.entry.where(resource is Composition).resource.date"
          fhir_path: "Bundle;entry;resource;Composition;date"
        requiredPackage:
          packageName: "de.gkvsv.erezeptabrechnungsdaten"
          packageVersion: "1.0.6"
      1.1.0:
        version: "1.1.0"
        validityPeriod:
          valid_from: "2022-01-01"
          valid_to: "2022-06-30"
        # fhir_path: "Bundle.entry.where(resource is Composition).resource.date"
          fhir_path: "Bundle;entry;resource;Composition;date"
        requiredPackage:
          packageName: "de.gkvsv.erezeptabrechnungsdaten"
          packageVersion: "1.1.0"
      1.2:
        version: "1.2"
        validityPeriod:
          valid_from: "2022-07-01"
          valid_to: "2023-06-30" # TODO: Übergangzeitraum?
        # fhir_path: "Bundle.entry.where(resource is Composition).resource.date"
          fhir_path: "Bundle;entry;resource;Composition;date"
        requiredPackage:
          packageName: "de.gkvsv.erezeptabrechnungsdaten"
          packageVersion: "1.2.0"

  # GKV-SV Profile des eAbrechnungsdatensatzes (https://simplifier.net/erezeptabrechnungsdaten)
  "https://fhir.gkvsv.de/StructureDefinition/GKVSV_PR_TA7_Rechnung_Bundle":
    profileName: "https://fhir.gkvsv.de/StructureDefinition/GKVSV_PR_TA7_Rechnung_Bundle"
    versions:
      1.3:
        version: "1.3"
        validityPeriod:
          valid_from: "2023-07-01"
          valid_to: "2024-12-31" # TODO: Endpunkt!
        # fhir_path: "Bundle.entry.where(resource is Composition).resource.date"
          fhir_path: "Bundle;entry;resource;Composition;date"
        requiredPackage:
          packageName: "de.gkvsv.erezeptabrechnungsdaten"
          packageVersion: "1.3.0-rc2"

  # TODO: add? Umgang mit Referenzen?
  # https://fhir.gkvsv.de/StructureDefinition/GKVSV_PR_TA7_Sammelrechnung_Composition
  # https://fhir.gkvsv.de/StructureDefinition/GKVSV_PR_TA7_RezeptBundle
  # https://fhir.gkvsv.de/StructureDefinition/GKVSV_PR_TA7_Rechnung
  # https://fhir.gkvsv.de/StructureDefinition/GKVSV_PR_ERP_eAbrechnungsdaten
  # https://fhir.gkvsv.de/StructureDefinition/GKVSV_PR_Binary

  # PKV Profile des eAbgabedatensatzesPKV (https://simplifier.net/erezeptabgabedatenpkv)
  "http://fhir.abda.de/eRezeptAbgabedaten/StructureDefinition/DAV-PKV-PR-ERP-AbgabedatenBundle":
    profileName: "http://fhir.abda.de/eRezeptAbgabedaten/StructureDefinition/DAV-PKV-PR-ERP-AbgabedatenBundle"
    versions:
      1.1: #coming soon
        version: "1.1"
        validityPeriod:
          valid_from: "2023-07-01"
          valid_to: "2023-12-31" # TODO: Endpunkt!
        # fhir_path: "Bundle.entry.where(resource is MedicationDispense).resource.whenHandedOver"
          fhir_path: "Bundle;entry;resource;MedicationDispense;whenHandedOver"
        requiredPackage:
          packageName: "de.abda.erezeptabgabedatenpkv"
          packageVersion: "1.1.0-rc12"
  ### TODO: BETA
  #    1.1: #coming soon
  #      version: "1.1"
  #      validityPeriod:
  #        valid_from: "2023-01-01"
  #        valid_to: "2023-12-31" # TODO: Endpunkt!
  #      # fhir_path: "Bundle.entry.where(resource is MedicationDispense).resource.whenHandedOver"
  #        fhir_path: "Bundle;entry;resource;MedicationDispense;whenHandedOver"
  #      requiredPackage:
  #        packageName: "erezeptabgabedatenpkv.staging"
  #        packageVersion: "1.1.0-beta5"

  # TODO: add? Umgang mit Referenzen?
  # http://fhir.abda.de/eRezeptAbgabedaten/StructureDefinition/DAV-PKV-PR-ERP-Apotheke
  # http://fhir.abda.de/eRezeptAbgabedaten/StructureDefinition/DAV-PKV-PR-ERP-AbgabedatenComposition
  # http://fhir.abda.de/eRezeptAbgabedaten/StructureDefinition/DAV-PKV-PR-ERP-Abgabeinformationen
  # http://fhir.abda.de/eRezeptAbgabedaten/StructureDefinition/DAV-PKV-PR-ERP-Abrechnungszeilen